import{l as n}from"./theme-scripts-1743080927.js";customElements.get("vimeo-video")||customElements.define("vimeo-video",class extends HTMLElement{constructor(){super(),this.initScript()}initScript(){n("https://player.vimeo.com/api/player.js").then(e=>{console.log("script successfully loaded",e),this.initVimeo()}).catch(e=>{console.error(e)})}initVimeo(){this.vimeoVideo=this,this.vimeoVideoSettings=JSON.parse(this.vimeoVideo.querySelector("[vimeo-json-settings]").innerHTML),this.vimeoPlaceholder=this.vimeoVideo.querySelector(".vimeo-video__placeholder");const e=window.matchMedia(`(min-width: ${this.vimeoVideoSettings.videoBreakpoint})`);this.matchQueryInit(e),e.addEventListener("change",this.matchQueryChange.bind(this)),this.unmuteButton=this.vimeoVideo.querySelector(".vimeo-video__unmute-button"),this.unmuteButton&&this.unmuteButton.addEventListener("click",this.enableSound.bind(this))}matchQueryInit(e){const i=e.matches?"Desktop":"Mobile";e.matches?this.setupPlayer(i):this.setupPlayer(i)}matchQueryChange(e){this.player.unload();const i=e.matches?"Desktop":"Mobile";e.matches?this.player.loadVideo(this.vimeoVideoSettings["videoId"+i]):this.player.loadVideo(this.vimeoVideoSettings["videoId"+i])}setupPlayer(e){this.player=new Vimeo.Player(this.vimeoPlaceholder,{url:this.vimeoVideoSettings[`videoId${e}`],autoplay:this.vimeoVideoSettings.autoplay,autopause:this.vimeoVideoSettings.autopause,muted:this.vimeoVideoSettings.muted,background:this.vimeoVideoSettings.background,loop:this.vimeoVideoSettings.loop,title:this.vimeoVideoSettings.title,controls:this.vimeoVideoSettings.controls}),this.playPlayer()}playPlayer(){this.player.pause(),this.player.ready().then(function(){var e=new IntersectionObserver(i=>{i.forEach(s=>{this.player.getPaused().then(function(o){const t=this.querySelector(".vimeo-video__slide-fallback-image");!s.isIntersecting&&!o?(t&&(t.style.opacity=1,t.style.visibility="visible"),this.player.pause()):s.isIntersecting&&o&&(t&&(t.style.opacity=0,t.style.visibility="hidden"),this.player.play())}.bind(this))})},{threshold:.2});e.observe(this)}.bind(this))}enableSound(){this.player.setVolume(1),this.unmuteButton.classList.add("hidden")}});
//# sourceMappingURL=/cdn/shop/t/28/assets/novicell_vimeo-video-17430809272.js.map
