class n extends HTMLElement{constructor(){super(),this.addEventListener("keyup",t=>t.code==="Escape"&&this.close()),this.querySelector("#CartDrawer-Overlay").addEventListener("click",this.close.bind(this)),this.setHeaderCartIconAccessibility()}setHeaderCartIconAccessibility(){document.querySelectorAll("#cart-icon-bubble, #ModalLink-Samples").forEach(e=>{e&&(e.setAttribute("role","button"),e.setAttribute("aria-haspopup","dialog"),e.addEventListener("click",s=>{s.preventDefault(),e.hasAttribute("data-sample-cart-link")&&e.closest("#PopupModal-Samples").removeAttribute("open"),this.open(e)}),e.addEventListener("keydown",s=>{s.code.toUpperCase()==="SPACE"&&(s.preventDefault(),this.open(e))}))})}open(t){t&&this.setActiveElement(t);const e=this.querySelector('[id^="Details-"] summary');e&&!e.hasAttribute("role")&&this.setSummaryAccessibility(e),setTimeout(()=>{this.classList.add("animate","active")}),this.addEventListener("transitionend",()=>{const s=this.classList.contains("is-empty")?this.querySelector(".drawer__inner-empty"):document.getElementById("CartDrawer"),r=this.querySelector(".drawer__inner")||this.querySelector(".drawer__close");trapFocus(s,r)},{once:!0}),document.body.classList.add("overflow-hidden")}close(){this.classList.remove("active"),removeTrapFocus(this.activeElement),document.body.classList.remove("overflow-hidden")}setSummaryAccessibility(t){t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),t.nextElementSibling.getAttribute("id")&&t.setAttribute("aria-controls",t.nextElementSibling.id),t.addEventListener("click",e=>{e.currentTarget.setAttribute("aria-expanded",!e.currentTarget.closest("details").hasAttribute("open"))}),t.parentElement.addEventListener("keyup",onKeyUpEscape)}renderContents(t){this.querySelector(".drawer__inner").classList.contains("is-empty")&&this.querySelector(".drawer__inner").classList.remove("is-empty"),this.productId=t.id,this.getSectionsToRender().forEach(e=>{const s=e.selector?document.querySelector(e.selector):document.getElementById(e.id);s.innerHTML=this.getSectionInnerHTML(t.sections[e.id],e.selector)}),setTimeout(()=>{this.querySelector("#CartDrawer-Overlay").addEventListener("click",this.close.bind(this)),this.open()})}getSectionInnerHTML(t,e=".shopify-section"){return new DOMParser().parseFromString(t,"text/html").querySelector(e).innerHTML}getSectionsToRender(){return[{id:"novicell_cart-drawer",selector:"#CartDrawer"},{id:"cart-icon-bubble",selector:"#cart-icon-bubble"}]}getSectionDOM(t,e=".shopify-section"){return new DOMParser().parseFromString(t,"text/html").querySelector(e)}setActiveElement(t){this.activeElement=t}}customElements.define("cart-drawer",n);function o(){const t=[...document.querySelectorAll('input[name="attributes[Customer type]"]')].some(r=>r.checked),e=document.querySelector("#checkout, #CartDrawer-Checkout"),s=document.getElementById("notif-customerType-consent");t?(e.classList.remove("disabled"),s.classList.add("tw-hidden")):e.classList.add("disabled")}document.addEventListener("change",function(i){i.target.matches('input[name="attributes[Customer type]"]')&&o()}),document.addEventListener("click",function(i){if(i.target.matches("#checkout, #CartDrawer-Checkout")&&i.target.classList.contains("disabled")){const t=document.getElementById("notif-customerType-consent");i.preventDefault(),t.classList.remove("tw-hidden")}});
//# sourceMappingURL=/cdn/shop/t/28/assets/novicell_cart-drawer-17430809272.js.map
