import{t as a}from"./theme-scripts-1743080927.js";class n extends HTMLElement{constructor(){super(),this.stickyHeader=document.querySelector(".header-wrapper"),this.headerHeight=`${this.stickyHeader.querySelector(".header-wrapper > header").offsetHeight}px`,getComputedStyle(document.body).getPropertyValue("--page-header-transparent")=="true"?this.stickyHeader.setAttribute("data-transparent-header","true"):getComputedStyle(document.body).getPropertyValue("--header-transparent-on-hero-element")=="true"?this.stickyHeader.setAttribute("data-transparent-header","true"):this.stickyHeader.setAttribute("data-transparent-header","false"),this.loadMegamenuDropdown()}loadMegamenuDropdown(){this.backgroundAnimation=null,this.isClosing=!1,this.isExpanding=!1,this.details=this.querySelectorAll("details.mega-menu"),this.details.forEach(e=>{this.summary=e.querySelector("summary"),this.summary.addEventListener("click",t=>{t.preventDefault(),this.activeDetails=e,this.activeDetails&&this.textHideMegamenuContent(),this.megamenuContentOnClick()}),e.closest(".header-wrapper").addEventListener("mouseenter",t=>{t.currentTarget.classList.add("expanded")}),e.closest(".header-wrapper").addEventListener("mouseleave",t=>{t.currentTarget.classList.remove("expanded"),e.open&&this.shrinkMegamenuContent()}),this.onClickSubcategory(e),this.showChildLevelsOnClick(e)})}megamenuContentOnClick(){this.isClosing||!this.activeDetails.open?this.openMegamenuContent():(this.isExpanding||this.activeDetails.open)&&this.shrinkMegamenuContent()}shrinkMegamenuContent(){this.isClosing=!0,this.backgroundAnimation&&this.backgroundAnimation.cancel(),this.backgroundAnimation=this.activeDetails.querySelector(".mega-menu__background-transition").animate({height:[`calc(100% + ${this.headerHeight})`,"0"],top:[`-${this.headerHeight}`,"0"]},{duration:200,easing:"cubic-bezier(.14,.4,.59,.59)"}),this.backgroundAnimation.onfinish=()=>this.onAnimationFinishMegamenuContent(!1),this.textHideMegamenuContent(),this.backgroundAnimation.oncancel=()=>this.isClosing=!1}openMegamenuContent(){this.activeDetails.open=!0,this.isExpanding=!0,window.requestAnimationFrame(()=>this.expandMegamenuContent())}expandMegamenuContent(){this.backgroundAnimation&&this.backgroundAnimation.cancel(),this.backgroundAnimation=this.activeDetails.querySelector(".mega-menu__background-transition").animate({height:["0",`calc(100% + ${this.headerHeight})`],top:["0",`-${this.headerHeight}`]},{duration:200,easing:"cubic-bezier(.14,.4,.59,.59)"}),this.backgroundAnimation.onfinish=()=>this.textRevealMegamenuContent()}textHideMegamenuContent(){this.activeDetails.querySelector(".mega-menu__list").classList.add("tw-invisible"),this.activeDetails.querySelector(".mega-menu__list").classList.add("tw-opacity-0"),this.activeDetails.querySelector(".mega-menu__list").classList.remove("tw-opacity-100")}textRevealMegamenuContent(){this.activeDetails.querySelector(".mega-menu__list").classList.remove("tw-invisible"),this.activeDetails.querySelector(".mega-menu__list").classList.remove("tw-opacity-0"),this.activeDetails.querySelector(".mega-menu__list").classList.add("tw-opacity-100"),a(this.activeDetails.querySelector("summary").nextElementSibling,this.activeDetails)}onAnimationFinishMegamenuContent(e){this.activeDetails.open=e,this.backgroundAnimation=null,this.isClosing=!1,this.isExpanding=!1}showChildLevelsOnClick(e){e.querySelectorAll("a[data-child]").forEach(t=>{t.addEventListener("click",i=>{i.preventDefault(),document.querySelectorAll("ul[data-parent]").forEach(r=>{r.classList.add("hidden","has-submenu"),r.classList.remove("open"),r.setAttribute("aria-expanded","false")});const s=t.parentNode.parentNode.querySelector(`ul[data-parent="${t.dataset.child}"]`);s==null?(t.setAttribute("redirect",""),this.executeRedirect(t)):(t.setAttribute("aria-expanded","true"),s.classList.remove("hidden"),s.classList.add("open"),s.setAttribute("aria-expanded","true"),a(t,s))})})}onClickSubcategory(e){e.querySelectorAll("[data-child]").forEach(t=>{t.addEventListener("click",this.executeRedirect.bind(this,t)),t.addEventListener("mouseenter",this.clearRedirect.bind(this,t)),t.addEventListener("click",this.addOpenState.bind(this,t)),t.addEventListener("mouseenter",this.removeOpenState.bind(this,t))})}clearRedirect(e){e.removeAttribute("redirect")}executeRedirect(e){e.hasAttribute("redirect")?location.href=e.getAttribute("href"):e.setAttribute("redirect","")}addOpenState(e){e.classList.add("open"),e.setAttribute("redirect","")}removeOpenState(e){e.classList.remove("open")}connectedCallback(){this.header=document.querySelector(".section-header"),this.stickyHeader=document.querySelector(".header-wrapper"),this.headerIsAlwaysSticky=this.getAttribute("data-sticky-type")==="always"||this.getAttribute("data-sticky-type")==="reduce-logo-size",this.headerBounds={},this.setHeaderHeight(),this.isheaderTransparentBeforeHero=getComputedStyle(document.body).getPropertyValue("--header-transparent-on-hero-element")=="true",this.isheaderTransparentBeforeHero&&this.headerTransparentBeforeHero(),window.matchMedia("(max-width: 990px)").addEventListener("change",this.setHeaderHeight.bind(this)),this.headerIsAlwaysSticky&&this.header.classList.add("shopify-section-header-sticky"),this.currentScrollTop=0,this.preventReveal=!1,this.predictiveSearch=this.querySelector("predictive-search"),this.onScrollHandler=this.onScroll.bind(this),this.hideHeaderOnScrollUp=()=>this.preventReveal=!0,this.addEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.addEventListener("scroll",this.onScrollHandler,!1),this.createObserver()}headerTransparentBeforeHero(){const e=document.querySelector(".hero-with-slideshow:first-of-type");e&&new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting?this.stickyHeader.setAttribute("data-transparent-header","true"):this.stickyHeader.setAttribute("data-transparent-header","false")})},{threshold:.2}).observe(e)}setHeaderHeight(){document.documentElement.style.setProperty("--header-height",`${this.header.offsetHeight-1}px`)}disconnectedCallback(){this.removeEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.removeEventListener("scroll",this.onScrollHandler)}createObserver(){new IntersectionObserver((t,i)=>{this.headerBounds=t[0].intersectionRect,i.disconnect()}).observe(this.header)}onScroll(){const e=window.pageYOffset||document.documentElement.scrollTop;if(!(this.predictiveSearch&&this.predictiveSearch.isOpen)){if(e>this.currentScrollTop&&e>this.headerBounds.bottom){if(this.header.classList.add("scrolled-past-header"),this.preventHide)return;requestAnimationFrame(this.hide.bind(this))}else e<this.currentScrollTop&&e>this.headerBounds.bottom?(this.header.classList.add("scrolled-past-header"),!this.preventReveal&&!document.body.classList.contains("filter-is-open")?requestAnimationFrame(this.reveal.bind(this)):(window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout(()=>{this.preventReveal=!1},66),requestAnimationFrame(this.hide.bind(this)))):e<=this.headerBounds.top&&(this.header.classList.remove("scrolled-past-header"),requestAnimationFrame(this.reset.bind(this)));this.currentScrollTop=e}}hide(){this.headerIsAlwaysSticky||(this.header.classList.add("shopify-section-header-hidden","shopify-section-header-sticky"),this.closeMenuDisclosure(),this.closeSearchModal(),this.moveFilter(!1))}reveal(){this.headerIsAlwaysSticky||(this.header.classList.add("shopify-section-header-sticky","animate"),this.header.classList.remove("shopify-section-header-hidden"),this.moveFilter(!0))}reset(){this.headerIsAlwaysSticky||this.header.classList.remove("shopify-section-header-hidden","shopify-section-header-sticky","animate")}closeMenuDisclosure(){this.disclosures=this.disclosures||this.header.querySelectorAll("header-menu"),this.disclosures.forEach(e=>e.close())}closeSearchModal(){this.searchModal=this.searchModal||this.header.querySelector("details-modal"),this.searchModal.close(!1)}moveFilter(e){if(this.getAttribute("data-sticky-type")=="on-scroll-up"){const t=document.querySelector(".facets-wrapper"),i=this.offsetHeight;e?t.style.top=`${i}px`:t.style.top="0"}}}customElements.define("sticky-header",n);
//# sourceMappingURL=/cdn/shop/t/28/assets/novicell_header-17430809272.js.map
