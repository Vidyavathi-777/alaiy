import{g as n,i as s}from"./theme-scripts-1743080927.js";class r extends HTMLElement{constructor(){super(),this.initializeMessages()}async initializeMessages(){try{const e=await n();if(!e)return;this.filterMessagesByRegion(e),this.initAnimation()}catch(e){console.error("Error initializing announcement bar:",e)}}filterMessagesByRegion(e){this.querySelectorAll(".text-animation-slider__item").forEach(t=>{const i=t.dataset.countries;i==="global"||this.isMessageValidForRegion(i,e)||t.remove()})}isMessageValidForRegion(e,t){const i=window.storeSelectorConfig?.regions;if(!i)return!1;switch(e){case"global":return!0;case"unsupported":return!Object.values(i).some(a=>a.countryCodes.includes(t));default:return s(t,e)}}initAnimation(){this.animateContainer=this.querySelector(".text-animation-slider__container"),this.animateContainer&&(this.animateSlider=this.querySelector(".text-animation-slider__slider"),this.animatedItems=this.animateSlider.querySelectorAll(".text-animation-slider__item"),this.animatedItems.length&&(this.animatedItems[0].classList.add("active","animated"),this.animateTextTimeout=null,this.animateTextTimeoutResize=null,this.firstLoad=!0,this.animateDuration=parseInt(this.animateSlider.dataset.delay,10),this.animatedItems.length>1&&this.animate()))}animate(){this.animateTextTimeout=setTimeout(()=>{const e=this.animateSlider.querySelector(".active");if(!e)return;const t={noAnimation:"animated",animateIn:"animate-in",animateOut:"animate-out",active:"active"},i=e.nextElementSibling||this.animateSlider.firstElementChild;e.classList.add(t.animateOut),e.classList.remove(t.active,t.noAnimation,t.animateIn),i.classList.add(t.active,t.animateIn),this.firstLoad=!1,this.animate()},this.animateDuration)}disconnectedCallback(){this.animateTextTimeout&&clearTimeout(this.animateTextTimeout),this.animateTextTimeoutResize&&clearTimeout(this.animateTextTimeoutResize)}}customElements.define("announcement-bar",r);
//# sourceMappingURL=/cdn/shop/t/28/assets/novicell_announcement-bar-17430809272.js.map
